define("mobileActionsMenu/bi/events.json",[],function(){return{MOBILE_ACTION_BAR_TOGGLE:{eventId:370,adapter:"ugc-viewer",params:{site_id:"site_id",status:"status"}},MOBILE_ACTION_BAR_USAGE:{eventId:371,adapter:"ugc-viewer",params:{site_id:"site_id",button_name:"button_name"}}}});define("mobileActionsMenu/components/mobileActionsMenuItem",["react","utils","santaProps"],function(a,b,c){"use strict";var d=a.createClass({displayName:"MobileActionsMenuItem",statics:{useSantaTypes:true},propTypes:{styleId:a.PropTypes.string.isRequired,isSelected:a.PropTypes.bool.isRequired,level:a.PropTypes.number.isRequired,hasChildren:a.PropTypes.bool.isRequired,target:a.PropTypes.string.isRequired,href:a.PropTypes.string.isRequired,"data-anchor":a.PropTypes.string.isRequired,label:a.PropTypes.string.isRequired,openPopup:c.Types.popup.open.isRequired,closeMenu:a.PropTypes.func.isRequired},render:function(){var c={};c[this.props.styleId+"_selected"]=this.props.isSelected;c[this.props.styleId+"_subItem"]=this.props.level>1;c[this.props.styleId+"_hasChildren"]=this.props.hasChildren;var d="#";if(this.props.target==="page"){d=this.props.href}else if(this.props.target===null){d=""}return a.DOM.li({onClick:this.onItemClick},a.DOM.a({href:d,"data-anchor":this.props["data-anchor"],className:b.classNames(c)},this.props.level>1?"> "+this.props.label:this.props.label))},onItemClick:function(){if(this.props.target==="window"){this.props.openPopup(this.props.href)}else if(this.props.target==="page"){this.props.closeMenu()}}});return d});define("mobileActionsMenu/aspects/MobileActionsMenuAspect",["lodash","core"],function(a,b){"use strict";function c(b){var c=a.get(b.getSiteMetaData(),"quickActions.configuration.quickActionsMenuEnabled",false);var d=!a.some(b.getPageData("masterPage").structure.mobileComponents,{id:"QUICK_ACTION_BAR"});var e=b.isMobileDevice()&&b.renderFlags.renderMobileActionMenu&&c&&d;if(e){return{id:"MOBILE_ACTIONS_MENU",skin:"wysiwyg.viewer.skins.mobile.MobileActionsMenuSkin",componentType:"wysiwyg.viewer.components.MobileActionsMenu",styleId:"mobileActionsMenu",layout:{position:"static"}}}}function d(a){var b=a.getSiteData();var d=c(b);if(!d){return null}return[{structure:d,props:{userColorScheme:b.rendererModel.siteMetaData.quickActions.colorScheme}}]}function e(){}e.prototype={getComponentsToRender:d};b.siteAspectsRegistry.registerSiteAspect("mobileActionsMenu",e);return e});define("mobileActionsMenu",["lodash","react","core","santaProps","mobileActionsMenu/bi/events.json","mobileActionsMenu/components/mobileActionsMenuItem","mobileActionsMenu/aspects/MobileActionsMenuAspect"],function(a,b,c,d,e,f){"use strict";function g(b,c,d,e){function f(a,b){return h(b,c,a,d,e)}return a(b).filter("isVisibleMobile").reduce(function(b,c){var d=a(c.items).filter("isVisibleMobile").map(f.bind(null,2)).value();return b.concat([f(1,c)]).concat(d)},[])}function h(c,d,e,g,h){var i=c.link?c.link.render.href:null;return b.createElement(f,{label:c.label,href:i,target:i?"page":null,"data-anchor":a.get(c,"link.render.data-anchor"),closeMenu:h,level:e,hasChildren:c.items&&c.items.length>0,isSelected:"#"+d===c.link?c.link.pageId:false,styleId:g})}function i(b,c){return a.map(b,function(a){return j(a.id,a.url,c)})}function j(a,c,d){return b.createElement(f,{label:k(a),href:c,target:"window",styleId:d})}function k(a){var b={facebook:"Facebook",twitter:"Twitter",pinterest:"Pinterest",google_plus:"Google+",tumblr:"Tumblr",blogger:"Blogger",linkedin:"LinkedIn",youtube:"YouTube",vimeo:"Vimeo",flickr:"Flickr","":""};return b[a]||a}return{displayName:"MobileActionsMenu",mixins:[c.compMixins.skinBasedComp],statics:{useSantaTypes:true},propTypes:{userColorScheme:d.Types.RendererModel.siteMetaData.quickActions.colorScheme.isRequired,socialLinks:d.Types.RendererModel.siteMetaData.quickActions.socialLinks.isRequired,contactInfo:d.Types.RendererModel.siteMetaData.contactInfo.isRequired,configuration:d.Types.RendererModel.siteMetaData.quickActions.configuration.isRequired,getInvertedZoomRatio:d.Types.mobile.getInvertedZoomRatio.isRequired,siteMenuWithRender:d.Types.Menu.siteMenuWithRender.isRequired,currentUrlPageId:d.Types.Component.currentUrlPageId.isRequired,reportBI:d.Types.reportBI.isRequired,styleId:d.Types.Component.styleId.isRequired,siteId:d.Types.RendererModel.siteId.isRequired},getInitialState:function(){return{$display:"closed",$theme:this.props.userColorScheme||"dark",$list:"nolist",zoom:1}},componentDidLayout:function(){a.delay(function(){var a=this.props.getInvertedZoomRatio();this.setState({zoom:a})}.bind(this),1e3)},getSkinProperties:function(){var a={};var c=this.props.siteMenuWithRender;var d=this.state.$list==="pages"?g(c,this.props.currentUrlPageId,this.props.styleId,this.onListCloseClick):[];var e=this.state.$list==="social"?i(this.props.socialLinks,this.props.styleId):[];var f=[];if(this.props.configuration.navigationMenuEnabled){f.push(b.DOM.li({className:this.props.styleId+"_navigation",onClick:this.onMenuItemClick.bind(this,"pages")},b.DOM.a()))}if(this.props.configuration.phoneEnabled){f.push(b.DOM.li({className:this.props.styleId+"_phone",onClick:this.onMenuItemClick.bind(this,"phone")},b.DOM.a()))}if(this.props.configuration.emailEnabled){f.push(b.DOM.li({className:this.props.styleId+"_email",onClick:this.onMenuItemClick.bind(this,"email")},b.DOM.a()))}if(this.props.configuration.addressEnabled){f.push(b.DOM.li({className:this.props.styleId+"_address",onClick:this.onMenuItemClick.bind(this,"address")},b.DOM.a()))}if(this.props.configuration.socialLinksEnabled){f.push(b.DOM.li({className:this.props.styleId+"_socialLinks",onClick:this.onMenuItemClick.bind(this,"social")},b.DOM.a()))}if(f.length===0){a.display="none"}a.zoom=this.state.zoom;return{"":{style:a},wrapper:{onSwipeUp:this.onTouchSwipeUp,onSwipeDown:this.onTouchSwipeDown,style:{className:"mobile-actions-menu-wrapper"}},knobContainer:{},knob:{onClick:this.onKnobClick},menuContainer:{children:b.DOM.ul({children:f}),style:{}},lists:{},listTitle:{children:this.state.$list==="pages"?"Pages":"See me on..."},pagesList:{children:b.DOM.ul({children:d})},socialList:{children:b.DOM.ul({children:e})},closeBtn:{onClick:this.onListCloseClick,onTouchEnd:this.onListCloseClick}}},componentWillReceiveProps:function(a){if(this.props.currentUrlPageId!==a.currentUrlPageId){this.setState({$list:"nolist"})}},onKnobClick:function(a){a.preventDefault();a.stopPropagation();this.props.reportBI(e.MOBILE_ACTION_BAR_TOGGLE,{site_id:this.props.siteId,status:this.state.$display!=="opened"});this.setState({$display:this.state.$display==="opened"?"closed":"opened"})},onTouchSwipeUp:function(a){a.preventDefault();a.stopPropagation();if(this.state.$display!=="opened"){this.setState({$display:"opened"})}},onTouchSwipeDown:function(a){a.preventDefault();a.stopPropagation();if(this.state.$display!=="closed"){this.setState({$display:"closed"})}},onMenuItemClick:function(a,b){b.preventDefault();b.stopPropagation();this.props.reportBI(e.MOBILE_ACTION_BAR_USAGE,{site_id:this.props.siteId,button_name:a});switch(a){case"pages":this.setState({$list:"pages"});break;case"address":window.location.href="http://maps.apple.com/?q="+this.props.contactInfo.address;break;case"phone":window.location.href="tel:"+this.props.contactInfo.phone;break;case"email":window.location.href="mailto:"+this.props.contactInfo.email;break;case"social":this.setState({$list:"social"});break;default:break}},onListCloseClick:function(){this.setState({$list:"nolist"});return false}}});