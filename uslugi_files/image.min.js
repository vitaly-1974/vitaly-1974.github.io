define("image",["lodash","react","utils","core","santaProps","imageCommon","experiment"],function(a,b,c,d,e,f,g){"use strict";var h=f.imageElementFactoryMixin;function i(b){return a.transform(b,function(b,c,d){b.push(a.kebabCase(d)+":"+c);return b},[]).join(";")}return{displayName:"Image",mixins:[d.compMixins.skinBasedComp,h],propTypes:{browser:e.Types.Browser.browser.isRequired,currentUrl:e.Types.currentUrl,onImageUnmount:e.Types.Images.onImageUnmount,getMediaFullStaticUrl:e.Types.ServiceTopology.getMediaFullStaticUrl,devicePixelRatio:e.Types.Device.devicePixelRatio,containerWidth:b.PropTypes.number.isRequired,containerHeight:b.PropTypes.number.isRequired,imageData:b.PropTypes.object.isRequired,style:b.PropTypes.object,quality:b.PropTypes.object,alignType:b.PropTypes.string,opacity:b.PropTypes.number,displayMode:b.PropTypes.string,effectName:b.PropTypes.string,addItemProp:b.PropTypes.bool,imgStyle:b.PropTypes.object,"data-gallery-id":b.PropTypes.string,"data-page-desc":b.PropTypes.string,"data-query":b.PropTypes.string,"data-image-index":b.PropTypes.number,onMouseEnter:b.PropTypes.func,onTouchStart:b.PropTypes.func},statics:{useSantaTypes:true},getInitialState:function(){this.cssFiltersSupported=!(this.props.browser.ie||this.props.browser.edge);return{showPreloader:false}},componentWillUnmount:function(){this.props.onImageUnmount(this.props.id)},hasEffect:function(){return this.props.effectName&&this.props.effectName!=="none"},onImageMouseEnter:function(){if(typeof this.props.onMouseEnter==="function"){this.props.onMouseEnter(this.props.id)}},onImageTouchStart:function(){if(typeof this.props.onTouchStart==="function"){this.props.onTouchStart(this.props.id)}},getDefaultStyles:function(b){return a.pickBy(b,function(a){return a!==""})},getContainerStyle:function(b){var c=this.getDefaultStyles(this.props.style);var d=b.css.container;var e=a.assign({position:"absolute",width:this.props.containerWidth,height:this.props.containerHeight},d,c);if(this.hasEffect()){e.WebkitTransform="translateZ(0)";e.transform="translateZ(0)"}if(a.isNumber(this.props.imageData.opacity)){e.opacity=this.props.imageData.opacity}return e},updateRootStyle:function(b,c){if(this.context.shouldRenderImageSource){var d=this.getContainerStyle(c);a.assign(b,{style:a.defaults(d,this.props.style)});return}var e=["visibility","transform"];var f=a.pick(this.props.style,e);var g=a.omit(this.props.style,e);if(this.hasEffect()){f.WebkitTransform="translateZ(0)";f.transform="translateZ(0)"}a.assign(b,{style:f,"data-style":i(g)})},getSkinProperties:function(){var b;var d;var e=a.pick(this.props,["imageData","containerWidth","containerHeight","fittingType","alignType","quality","displayMode","addItemProp"]);if(this.hasEffect()&&!this.cssFiltersSupported){d=c.imageUtils.getImageComputedProperties(e,this.props.getMediaFullStaticUrl,this.props.currentUrl,this.props.devicePixelRatio,"svg");b=this.getSvgOnlyImageComponent(d)}else{d=c.imageUtils.getImageComputedProperties(e,this.props.getMediaFullStaticUrl,this.props.currentUrl,this.props.devicePixelRatio,"img");b=this.getImageComponents(d)}var f=this.state.showPreloader&&!g.isOpen("removeImagePreloader")?"circle-preloader white":"";var h=a.defaults({addChildren:b},{onMouseEnter:this.onImageMouseEnter,onTouchStart:this.onImageTouchStart},a.omit(this.props,"style"));this.updateRootStyle(h,d);return{"":h,preloader:{className:f}}},getDefaultSkinName:function(){return"skins.core.ImageNewSkinZoomable"}}});