define("render",["lodash","coreUtils","utils","core","reactDOM","experiment","animations","tweenEngine","TweenMax","TimelineMax","ScrollToPlugin","DrawSVGPlugin"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);function l(a){if(!window.clientSideRender){require(["warmup"],function(b){a(b)})}}function m(a,b){var c=b.query;var d=c.configName||"fullFunctionality";var e=a[d]||a.fullFunctionality;var f=e.getConfig();if(!c.dsOrigin){throw new Error("You must define dsOrigin parameter in order to use the documentServices - please speak to html-server team for a key")}f.origin=c.dsOrigin;return f}function n(b,d,e){var f=a(e).keys().pull("masterPage").value();return a.mapValues(e,function(a,e){if(d&&window.pagesData&&window.pagesData[e]){return a}return c.dataFixer.fix(a,f.slice(),b.requestModel,b.currentUrl,b.urlFormatModel,b.viewMode==="site",b.rendererModel.clientSpecMap)})}function o(b,c,f,g,h){l(function(a){a.willRender(c)});if(window.clientSideRender&&window.santaRenderingError&&window.parent){window.parent.postMessage({santaRenderingError:window.santaRenderingError})}d.renderer.renderSite(c,f,g,function(d){if(window.rendered){window.rendered.forceUpdate()}else{var f=window.document.getElementById("SITE_CONTAINER").children[0];window.rendered=e.render(d,window.document.getElementById("SITE_CONTAINER"));var g=window.document.getElementById("SITE_CONTAINER").children[0];l(function(a){window.sssr.success=f===g;window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:k()};window.sssr.clientMarkup=g.innerHTML;if(window.parent){if(window.sssr.success){window.parent.postMessage("sssrSuccess","*")}else{window.parent.postMessage({sssrFail:{clientMarkup:window.sssr.clientMarkup,serverMarkup:window.sssr.serverMarkup}},"*")}}a.didRender(c)});window.onpopstate=window.rendered.onPopState;window.onhashchange=window.rendered.onHashChange;if(window.parent){require(["santaPreview"],function(a){window.rendered.registerAspectToEvent("siteReady",function(){if(h){h(window.rendered)}if(window.documentServices){window.parent.postMessage("documentServicesLoaded","*");window.createSantaPreview=a}})})}if(b.qaAutomation){a.set(window,"testApi.domSelectors",b.qaAutomation.getDomSelectors(b.react,b.reactDOM));window.testApi.domSelectors.setSearchRoot(window.rendered);a.set(window,"testApi.isReady",true)}}})}function p(e,f,k){var l={};if(b.urlUtils.isQueryParamOn(k.currentUrl,"isSantaEditor")){l=a.assign(l,{componentViewMode:"editor"})}if(k.rendererModel.previewMode){l=a.assign(l,{isSocialInteractionAllowed:false,isPlayingAllowed:false})}k.renderFlags=a.assign({},k.renderFlags,l);var m=new c.FullSiteData(k);var n=h.create(i,j);m.animations=g.create(n);var o=d.SiteDataAPI.createSiteDataAPIAndDal(m,f);var p=o.siteData;var q=o.siteDataAPI;var r={pointers:o.pointers,displayedDAL:o.displayedDal,siteDataAPI:q};var s=p.isClientAfterSSR();return{fullSiteData:m,displayedSiteData:p,siteDataWrapper:o,viewerPrivateServices:r,isServerSideRender:s,siteModel:k,siteDataAPI:q}}function q(b,d,e,g,h){var i=p(b,d,e);var j=b.documentServices;try{if(j&&a.isUndefined(window.karmaIntegration)&&f.isOpen("sv_fullstory")){c.integrations.fullStory.start()}}catch(a){}if(j){i.siteDataWrapper.dataLoadedRegistrar=i.siteDataAPI.registerDataLoadedCallback.bind(i.siteDataAPI);window.documentServices=new j.Site(m(j.configs,i.siteModel.currentUrl),i.siteDataWrapper,a.partial(n,i.siteModel,i.isServerSideRender),a.partial(o,b,i.displayedSiteData,i.viewerPrivateServices,g));a.set(window,"testApi.documentServices",window.documentServices)}else{var k=i.fullSiteData.pagesData;i.fullSiteData.pagesData=k&&n(i.siteModel,i.isServerSideRender,k);if(k.masterPage){i.siteDataAPI.createDisplayedPage("masterPage")}o(b,i.displayedSiteData,i.viewerPrivateServices,g,h)}}return{clientSide:q}});